{% load static %}
    <!-- Custom fonts for this template-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="{% static 'css/vendor/fontawesome-free/css/all.min.css' %}" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"rel="stylesheet">
    <link href="{% static 'css/vendor/fontawesome-free/css/all.min.css' %}" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap5.min.css"></>
    <!-- Custom styles for this template-->
    <link href="{% static 'css/css/sb-admin-2.min.css' %}" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


<html class="no-js" lang="en">
<head>
  <title>ICT Service Requisition | Approval | More</title>
</head>
<body>

    <!-- Main Body Div -->
  <div class="card shadow mb-4">
    {% if messages %}
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }}" role="alert">
      
        {{ message }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
    {% endfor %}
{% endif %}
    <!-- header -->
    <div class="card-header py-3 ">
     
      <button id="download" class="btn btn-success btn-sm ">Export PDF <i class="fa fa-file-pdf-o " aria-hidden="true"></i></button>
      <a href="javascript:window.print()" class="btn btn-sm-primary">Print<i class="fas fa-print" aria-hidden="true">  </i><a> 
        
      <a href="{% url 'dashboard' %}" class="btn btn-primary btn-sm float-right">Go Back <i class="fa fa-chevron-circle-left" aria-hidden="true"></i></a>

    </h6>

    
    </div>

     <!-- Form Body start -->
    <div class="card-body" id="requisitionbody">
      <div class="col-md-auto row-md-auto">
        <img src="{% static 'static_images/RBV_logo.png' %}" alt="rbv logo" style="width:130px;height:150px;"class="float-left">

          
        
        <h1 class="text-center"style="color:black;"> ICT SERVICE REQUISITION FORM </h1>
    

    
    </div>
    
    <p>  &nbsp;PMB 9062 – PIERRE BRUNET STREET– PORT VILA – VANUATU<br>
      &nbsp;TEL: (678) 23333 – FAX: (678) 24231<br>
      &nbsp;EMAIL: rbvinfo@rbv.gov.vu <br>
      &nbsp;WEBSITE: www.rbv.gov.vu </p>
      
    <div class="col-md-auto">
        <label > <strong style="color:black;">REQ ID:  </strong> {{data.id}} </label>
    </div>

    <div class="col-md-auto">
      <label > <strong style="color:black;">DATE & TIME LODGED:  </strong><p class="mb-2 bg-gradient-primary text-white"> {{data.created_at}} </p></label>
  </div>

      <div class="row-md-auto col-md-auto  ">
        
      
  
      
        <label for="reason_for_request" class="form-label" style="color:black;"><strong>{{  data.department }} DIR DECISION:</strong></label>
        
        {% if data.resp_dir_decision == "Pending" %}
                          <span class="badge badge-warning">Pending</span>
        {% elif data.resp_dir_decision == "Disapproved" %}
                          <span class="badge badge-danger">Disapproved</span>   
        {% elif data.resp_dir_decision == "Approved" %}
                          <span class="badge badge-success">Approved</span>               
        {% endif %}
        
        <label for="reason_for_request" class="form-label" style="color:black;"><strong>DSS DIR DECISION:</strong></label>
        
        {% if data.dss_dir_decision == "Pending" %}
                          <span class="badge badge-warning">Pending</span>
        {% elif data.dss_dir_decision == "Disapproved" %}
                          <span class="badge badge-danger">Disapproved</span>   
        {% elif data.dss_dir_decision == "Approved" %}
                          <span class="badge badge-success">Approved</span>               
        {% endif %}

        <label for="reason_for_request" class="form-label" style="color:black;"><strong>ICT MANAGER DECISION:</strong></label>
        
        {% if data.manager_ict_decision == "Pending" %}
                          <span class="badge badge-warning">Pending</span>
        {% elif data.manager_ict_decision == "Disapproved" %}
                          <span class="badge badge-danger">Disapproved</span>   
        {% elif data.manager_ict_decision == "Approved" %}
                          <span class="badge badge-success">Approved</span>               
        {% endif %}
        
      </div>
 

    <div class="col-md-auto ">
 
         
      <label for="start_date" style="color:black;"><strong>START DATE: </strong></label> 
      {{data.start_date}} &nbsp | &nbsp
      <label for="end_date" style="color:black;"><strong>END DATE: </strong></label> 
      {{data.end_date}} &nbsp | &nbsp
      <label for="start_time" style="color:black;"><strong>START TIME: </strong></label> 
      {{data.start_time}} &nbsp | &nbsp
  

      <label for="end_time "style="color:black;"><strong>END TIME: </strong></label> 
      {{data.end_time}}
    </div>

   

        <div class="col-md-auto row-md-auto ">
          <label id="name-label" style="color:black;" for="name" ><strong>REQUESTOR: </strong></label>
          

            
           
              {{data.user}} 
           
              &nbsp;
          &nbsp;
          <label id="Department-label"style="color:black;" for="department"><strong>DEPARTMENT: </strong></label>
          
           
              {{data.department}}
            
        
              
        </div>

        


        <div class="col-md-auto">

          
            <label for="service_requested" style="color:black;"><strong>SERVICE REQUESTED: </strong></label>
          

         <i> {{data.service_requested}}</i>
        </div>                
        
    

        <div class="col-md-auto">
          <label for="other_service" style="color:black;" class="form-label"><strong>OTHER SERVICES:</strong></label>
          <i> {{data.other_service}}</i>
        </div>

        <div class="col-md-auto">
          <label for="reason_for_request"style="color:black;" class="form-label"><strong>REASON FOR REQUEST:</strong></label>
          <i> {{data.reason_for_request}}</i>
        </div>

     
        
        <div class="col-md-auto">
          <label for="reason_for_request" style="color:black;"class="form-label"><strong>RESPECTIVE DIR :</strong></label>
          <i> {{data.resp_dir_comments}}</i>
        </div>

        <div class="col-md-auto">
          <label for="reason_for_request"style="color:black;" class="form-label"><strong>DSS DIR COMMENTS:</strong></label>
          <i> {{data.dss_director_comments}}</i>
        </div>

        <div class="col-md-auto">
          <label for="reason_for_request"style="color:black;" class="form-label"><strong>ICT MANAGER COMMENTS:</strong></label>
          <i> {{data.manager_ict_comments}}</i>
        </div>

        </div>
        <div class="card-body">
      
      <!-- Form Body end -->
    </div>
  </div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>


<script src="{% static 'css/js/sweetalert.min.js' %}"></script>
<script>
$(document).ready(function(){
  $('.form-check-input').click(function()
    {
    var txt="";
    $('.form-check-input:checked').each(function()
    {
      txt+=$(this).val()+", "
    });
    $('#service_requested').val(txt);
   });
});
  

window.onload = function () {
  document.getElementById("download")
      .addEventListener("click", () => {
          const body = this.document.getElementById("requisitionbody");
          console.log(body);
          console.log(window);
          var opt = {
             
              filename: 'ICTRequisition.pdf',
              image: { type: 'jpeg', quality: 1 },
              html2canvas: { scale: 10 },
              jsPDF: { unit: 'in', orientation: 'landscape' }
          };
          html2pdf().from(body).set(opt).save();
      })
}
</script>
</html>
